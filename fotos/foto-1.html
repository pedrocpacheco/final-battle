<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="foto.css">
  <title>Document</title>
</head>
<body>
  <main>
    <div class="top">
      <div class="botoes">
        <img class="saida" src="../img/placeholder/saida-white.png" alt="">
        <img class="fechada" src="../img/placeholder/fechada-white.png" alt="">
      </div>
      <div class="top-infos">
        <h2>Envio de Fotos Frontal</h2>
        <p>Tire uma foto da parte frontal da sua bicicleta</p>
      </div>
    </div>
    <div class="meio">
      <img src="../img/envio-fotos/1.png" alt="">
      <ul>
        <p class="topico">Não será possivel anexar uma imagem já existente, é necessário enviar uma nova</p>
        <p class="topico">A sua foto será analalizada por um modelo de IA para validar se ela é mesmo uma bicicleta.</p>
        <p class="topico">Certifique-se de enviar uma foto com a bicicleta em foto, para facilitar a validação</p>
        <p class="topico">A foto da sua bicicleta será armazenada na nossa base de dados</p>
      </ul>
    </div>
    <div class="botao">
      <button>Tirar Foto</button>
      <video autoplay></video>
      <canvas></canvas>
    </div>
    <script>
      var video = document.querySelector('video');

      navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
          video.srcObject = stream;
          video.play();
        })
        .catch(error => {
          console.log(error);
        })

      document.querySelector('button').addEventListener('click', () => {
        var canvas = document.querySelector('canvas');
        canvas.height = video.videoHeight;
        canvas.width = video.videoWidth;
        var context = canvas.getContext('2d');
        context.drawImage(video, 0, 0);
        
        // Converter o conteúdo do canvas em uma imagem base64
        var imageData = canvas.toDataURL('image/png');
        
        // Criar um elemento de link para download
        var link = document.createElement('a');
        link.href = imageData; // Definir a imagem como URL do link
        link.download = 'sua_foto.png'; // Nome do arquivo a ser salvo
        link.click(); // Simular o clique no link para iniciar o download
      });
    </script>
  </main>
  <footer>
    DEVELOPMENT FOOTAGE (MOBILE). SUBJECT TO CHANGE.
      LAYOUT MAY VARY ACROSS PLATAFORMS.</p>
  </footer>
</body>
</html>